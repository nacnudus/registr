---
output:
  md_document:
    variant: markdown_github
---

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

# RegistersClientR

This package is a very basic wrapper for the
[registers](https://registers.cloudapps.digital/)
[API](https://registers-docs.cloudapps.digital/#api-documentation-for-registers).

Registers are authoritative lists of things, built and maintained by the UK
government, for example, the `country` register is a list of countries.

A single function `get_all_records()` is provided, which downloads all the
records of a register into a tibble.  This saves you from manually handling the
paged download interface of large registers.

## Installation

```r
devtools::install_github("openregisters/RegistersClientR")
```

## Example

This is an example of downloading the `country` register.

```{r country}
library(RegistersClientR)
rr_records("country")
```

By default, the 'beta' version of the register is downloaded.  If you need
another version -- usually when the register is still in discovery or alpha,
then specify the phase.

```r
rr_records("country", "alpha")
```

The default page size is 5000, which is the current maximum supported by the API
and is sufficient to download most registers in one page.  But to show that
multiple pages are handled, you can specify a smaller page size.

```{r, page_size}
rr_records("country", page_size = 10)
```

## Data types

Each page is imported with character data types first, then combined, and
finally converted to (hopefully) appropriate data types by
`readr::parse_guess()`.  This avoids any problem with fields in the first page
not being representative of later pages.
